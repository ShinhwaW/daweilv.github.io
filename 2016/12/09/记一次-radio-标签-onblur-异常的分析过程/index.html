<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 记一次 radio 标签 onblur 异常的分析过程 · David 的个人博客 ๛ก(ｰ̀ωｰ́ก)</title><meta name="description" content="记一次 radio 标签 onblur 异常的分析过程 - David"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://dawei.lv/atom.xml" title="David 的个人博客 ๛ก(ｰ̀ωｰ́ก)"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/daweilv" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">记一次 radio 标签 onblur 异常的分析过程</h1><div class="post-info">Dec 9, 2016</div><div class="post-content"><p>问题版本：Safari 10.0 (12602.1.50.0.10)</p>
<h2 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h2><p>目标版本浏览器在鼠标点击 radio 的小圆点后再点击其他区域并不会触发 onblur 事件。问题可以重现，在 Chrome 下无此问题。</p>
<a id="more"></a>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">onblur</span>=<span class="string">"alert('blur')"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>我们先找到了 w3 上关于 blur 事件的定义：<a href="https://www.w3.org/TR/uievents/#event-type-blur" target="_blank" rel="noopener">https://www.w3.org/TR/uievents/#event-type-blur</a></p>
<blockquote>
<p>A user agent MUST dispatch this event when an event target loses focus. The focus MUST be taken from the element before the dispatch of this event type. This event type is similar to focusout, but is dispatched after focus is shifted, and does not bubble.</p>
</blockquote>
<p>也就是说，onblur 事件未触发是因为该控件在此之前并没有被 focus ，所以我们在点击 radio 控件的时候监听点击事件，在点击的时候主动触发一下设置 focus</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">onblur</span>=<span class="string">"alert('blur')"</span> <span class="attr">onclick</span>=<span class="string">"this.focus()"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>问题解决。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/12/09/vi-编辑器命令备忘/" class="prev">PREV</a><a href="/2016/12/09/常用-MySQL-数据库语句/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'lnyx';
var disqus_identifier = '2016/12/09/记一次-radio-标签-onblur-异常的分析过程/';
var disqus_title = '记一次 radio 标签 onblur 异常的分析过程';
var disqus_url = 'http://dawei.lv/2016/12/09/记一次-radio-标签-onblur-异常的分析过程/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//lnyx.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2018 <a href="https://github.com/daweilv" target="_blank" rel="nofollow">David</a>. Hosted by <a href="https://pages.coding.me" target="_blank" rel="nofollow" style="font-weight: bold">Coding Pages</a></p><p>友情链接 <a href="https://xiequan.info/" target="_blank" rel="nofollow">谢权'SELF</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-119593463-1",'auto');ga('send','pageview');</script></body></html>